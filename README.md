# ğŸ©º Motivational Interviewing Multi-Agent System

Google Agent Development Kit (ADK)ë¥¼ ì‚¬ìš©í•œ Motivational Interviewing ê°€ìƒ ë©´ë‹´ ê¸°ë¡ ìƒì„± ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ“‹ ê°œìš”

ì´ ì‹œìŠ¤í…œì€ ì„¸ ê°œì˜ ì „ë¬¸í™”ëœ ì—ì´ì „íŠ¸ê°€ í˜‘ë ¥í•˜ì—¬ í˜„ì‹¤ì ì¸ Motivational Interviewing ì„¸ì…˜ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤:

- **ğŸ©º ë©´ë‹´ì (Therapist) Agent**: MI ì „ë¬¸ê°€ë¡œì„œ ë©´ë‹´ì„ ì£¼ë„
- **ğŸ˜Š ë‚´ë‹´ì (Client) Agent**: ë¬¸ì œë¥¼ ê°€ì§„ í™˜ì ì—­í•  ì‹œë®¬ë ˆì´ì…˜  
- **ğŸ‘¨â€ğŸ« ìŠˆí¼ë°”ì´ì € (Supervisor) Agent**: ë©´ë‹´ìì—ê²Œ ì‹¤ì‹œê°„ í”¼ë“œë°± ì œê³µ

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### Multi-Agent Workflow

```
ë©´ë‹´ì Agent â†’ ë‚´ë‹´ì Agent â†’ ìŠˆí¼ë°”ì´ì € Agent â†’ ëŒ€í™” ê´€ë¦¬ì
    â†“                â†“               â†“              â†“
  ì§ˆë¬¸/ê°œì…         ë°˜ì‘/ì‘ë‹µ       í”¼ë“œë°±/ì§€ë„     íë¦„ ì œì–´
    â†“                â†“               â†“              â†“
        â† â† â† â† ê³µìœ  ì„¸ì…˜ ìƒíƒœ (Shared Session State) â† â† â† â†
```

### ì£¼ìš” êµ¬ì„± ìš”ì†Œ

1. **SequentialAgent**: í„´ë³„ ìˆœì°¨ ì‹¤í–‰ (ë©´ë‹´ì â†’ ë‚´ë‹´ì â†’ ìŠˆí¼ë°”ì´ì €)
2. **LoopAgent**: ì „ì²´ ì„¸ì…˜ ë°˜ë³µ ì‹¤í–‰ (ìµœëŒ€ 100íšŒ)
3. **Shared Session State**: ëª¨ë“  ì—ì´ì „íŠ¸ê°€ ì ‘ê·¼ ê°€ëŠ¥í•œ ê³µìœ  ë©”ëª¨ë¦¬
4. **SessionRecorder**: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì„¸ì…˜ ê¸°ë¡ ì €ì¥

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### í•„ìš” ì¡°ê±´

- Python 3.13+
- Google ADK 1.5.0+

### ì„¤ì¹˜

```bash
# í”„ë¡œì íŠ¸ í´ë¡ 
git clone <repository-url>
cd motivation

# ì˜ì¡´ì„± ì„¤ì¹˜ (uv ì‚¬ìš© ê¶Œì¥)
uv sync

# ë˜ëŠ” pip ì‚¬ìš©
pip install -e .
```

### ê¸°ë³¸ ì‹¤í–‰

```bash
# ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰
python hello.py

# ë˜ëŠ” ì§ì ‘ ëª¨ë“ˆ ì‹¤í–‰
python -m generator_critic.agent
```

## ğŸ’» ì‚¬ìš© ë°©ë²•

### 1. ê°„ë‹¨í•œ ì‚¬ìš©

```python
from generator_critic.agent import run_mi_session_sync

# ì„¸ì…˜ ì‹¤í–‰
output_file = run_mi_session_sync(
    client_problem="35ì„¸ ì§ì¥ì¸ì˜ ìŒì£¼ ë¬¸ì œ...",
    session_goal="ìŒì£¼ íŒ¨í„´ ì„±ì°° ë° ëŒ€ì•ˆ ëª¨ìƒ‰...",
    reference_material="MI ê¸°ë³¸ ì›ì¹™: OARS...",
    max_interactions=10
)

print(f"ì„¸ì…˜ ê¸°ë¡: {output_file}")
```

### 2. ë¹„ë™ê¸° ì‚¬ìš©

```python
import asyncio
from generator_critic.agent import create_mi_session

async def main():
    output_file = await create_mi_session(
        client_problem="...",
        session_goal="...",
        reference_material="...",
        max_interactions=20
    )
    return output_file

# ì‹¤í–‰
result = asyncio.run(main())
```

### 3. í´ë˜ìŠ¤ ê¸°ë°˜ ì‚¬ìš©

```python
from generator_critic.agent import MotivationalInterviewingSystem

# ì‹œìŠ¤í…œ ì´ˆê¸°í™”
mi_system = MotivationalInterviewingSystem(max_interactions=50)

# ì„¸ì…˜ ì‹¤í–‰
output_file = await mi_system.run_session(
    client_problem="...",
    session_goal="...",
    reference_material="..."
)
```

## ğŸ“– ì…ë ¥ ë§¤ê°œë³€ìˆ˜

### client_problem (í•„ìˆ˜)
ë‚´ë‹´ìê°€ ê°€ì§„ ë¬¸ì œì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…

```
ì˜ˆì‹œ:
"35ì„¸ ì§ì¥ì¸ìœ¼ë¡œ ìµœê·¼ ìŠ¤íŠ¸ë ˆìŠ¤ë¡œ ì¸í•œ ê³¼ìŒ ë¬¸ì œê°€ ì‹¬í•´ì§€ê³  ìˆìŠµë‹ˆë‹¤.
ì£¼ 4-5íšŒ ì •ë„ í‡´ê·¼ í›„ í˜¼ì ìˆ ì„ ë§ˆì‹œë©°, ì–‘ë„ ì ì  ëŠ˜ì–´ë‚˜ê³  ìˆìŠµë‹ˆë‹¤.
ê°€ì¡±ë“¤ì´ ê±±ì •ì„ í‘œí•˜ì§€ë§Œ ë³¸ì¸ì€ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œë¥¼ ìœ„í•´ í•„ìš”í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤."
```

### session_goal (í•„ìˆ˜)
ì´ë²ˆ ì„¸ì…˜ì—ì„œ ë‹¬ì„±í•˜ê³ ì í•˜ëŠ” ëª©í‘œ

```
ì˜ˆì‹œ:
"ë‚´ë‹´ìê°€ í˜„ì¬ ìŒì£¼ íŒ¨í„´ì— ëŒ€í•´ ì„±ì°°í•˜ê³ ,
ê±´ê°•í•œ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ë°©ë²•ì— ëŒ€í•œ ë™ê¸°ë¥¼ ë°œê²¬í•˜ë„ë¡ ë•ëŠ”ë‹¤."
```

### reference_material (ì„ íƒ)
ë©´ë‹´ìê°€ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” MI ì „ë¬¸ ìë£Œë‚˜ ê¸°ë²•

```
ì˜ˆì‹œ:
"MI ê¸°ë³¸ ì›ì¹™: OARS (Open questions, Affirmations, Reflections, Summaries)
ë³€í™” ì–¸ì–´ ê°•í™”, ì €í•­ ìµœì†Œí™”, ë‚´ë‹´ì ììœ¨ì„± ì¡´ì¤‘
ì–‘ê°€ê°ì • íƒìƒ‰: 'í•œí¸ìœ¼ë¡œëŠ”... ë‹¤ë¥¸ í•œí¸ìœ¼ë¡œëŠ”...'"
```

### max_interactions (ì„ íƒ, ê¸°ë³¸ê°’: 100)
ìµœëŒ€ ìƒí˜¸ì‘ìš© íšŸìˆ˜ ì œí•œ

## ğŸ“„ ì¶œë ¥ í˜•ì‹

ì„¸ì…˜ì´ ì™„ë£Œë˜ë©´ `output/` í´ë”ì— ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤:

```markdown
# Motivational Interviewing ì„¸ì…˜ ê¸°ë¡

## ì„¸ì…˜ ì •ë³´
- **ì¼ì‹œ**: 2024-01-15T14:30:00
- **ë‚´ë‹´ì ë¬¸ì œ**: ...
- **ì„¸ì…˜ ëª©í‘œ**: ...
- **ì°¸ê³  ìë£Œ**: ...
- **ì´ ìƒí˜¸ì‘ìš© íšŸìˆ˜**: 15
- **ì¢…ë£Œ ì‚¬ìœ **: ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™” ì¢…ë£Œ

## ë©´ë‹´ ê¸°ë¡

### Turn 1

**ğŸ©º Therapist**: ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ ì´ ìë¦¬ì— ë‚˜ì™€ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤...

**ğŸ˜Š Client**: ë„¤, ì•ˆë…•í•˜ì„¸ìš”. ì‚¬ì‹¤ ì—¬ê¸° ì˜¤ëŠ” ê²ƒì´ ì‰½ì§€ ì•Šì•˜ì–´ìš”...

**ğŸ‘¨â€ğŸ« Supervisor**: 
1. ì˜í•œ ì : ë”°ëœ»í•œ ì¸ì‚¬ì™€ í•¨ê»˜ ë‚´ë‹´ìì˜ ìš©ê¸°ë¥¼ ì¸ì •í•´ì¤€ ì ì´ ì¢‹ìŠµë‹ˆë‹¤.
2. ê°œì„ ì : ì¢€ ë” êµ¬ì²´ì ì¸ ì˜¤í”ˆ ì§ˆë¬¸ìœ¼ë¡œ ì‹œì‘í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
3. ì œì•ˆ: "ì˜¤ëŠ˜ ì´ì•¼ê¸°í•˜ê³  ì‹¶ì€ ê²ƒì´ ìˆë‹¤ë©´ ë¬´ì—‡ì¸ê°€ìš”?" ê°™ì€ ì§ˆë¬¸ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.
4. ë°©í–¥ì„±: ë‚´ë‹´ìì˜ í˜„ì¬ ìƒíƒœì™€ ë³€í™” ì˜ì§€ë¥¼ íƒìƒ‰í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš”.
```

## ğŸ¯ ì£¼ìš” íŠ¹ì§•

### 1. í˜„ì‹¤ì ì¸ ì‹œë®¬ë ˆì´ì…˜
- **ë‚´ë‹´ì**: ì–‘ê°€ê°ì •, ì €í•­, ë°©ì–´ê¸°ì œ ë“± í˜„ì‹¤ì ì¸ ë°˜ì‘
- **ë©´ë‹´ì**: MI ì›ì¹™ì— ë”°ë¥¸ ì „ë¬¸ì ì¸ ê°œì…
- **ìŠˆí¼ë°”ì´ì €**: ì‹¤ì‹œê°„ ê±´ì„¤ì  í”¼ë“œë°±

### 2. ì ì‘ì  ëŒ€í™” íë¦„
- ë‚´ë‹´ì ë°˜ì‘ì— ë”°ë¥¸ ìœ ì—°í•œ ë©´ë‹´ ì§„í–‰
- ìŠˆí¼ë°”ì´ì € í”¼ë“œë°±ì„ ë°˜ì˜í•œ ê°œì„ 
- ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™” ì¢…ë£Œ ê°ì§€

### 3. ì „ë¬¸ì  ê¸°ë¡
- êµ¬ì¡°í™”ëœ ë§ˆí¬ë‹¤ìš´ í˜•ì‹
- í„´ë³„ ì •ë¦¬ëœ ëŒ€í™” ë‚´ìš©
- ì„¸ì…˜ ë©”íƒ€ë°ì´í„° í¬í•¨

## ğŸ”§ ê³ ê¸‰ ì‚¬ìš©ë²•

### ì»¤ìŠ¤í…€ ì—ì´ì „íŠ¸ ìƒì„±

```python
from generator_critic.agent import TherapistAgent

# ë§ì¶¤í˜• ë©´ë‹´ì ì—ì´ì „íŠ¸
custom_therapist = TherapistAgent(name="SpecialistTherapist")

# ì»¤ìŠ¤í…€ instruction ì‚¬ìš© ì‹œ
custom_therapist.instruction = """
ë‹¹ì‹ ì€ ì¤‘ë… ì „ë¬¸ MI ì¹˜ë£Œì‚¬ì…ë‹ˆë‹¤.
íŠ¹ë³„íˆ ì•Œì½”ì˜¬ ì‚¬ìš© ì¥ì• ì— íŠ¹í™”ëœ ì ‘ê·¼ì„ ì‚¬ìš©í•˜ì„¸ìš”.
...
"""
```

### ì¢…ë£Œ ì¡°ê±´ ì»¤ìŠ¤í„°ë§ˆì´ì§•

`ConversationManager` í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì—¬ ì»¤ìŠ¤í…€ ì¢…ë£Œ ì¡°ê±´ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“Š ì‹œìŠ¤í…œ íë¦„ë„

```mermaid
graph TD
    A[ì„¸ì…˜ ì‹œì‘] --> B[ì´ˆê¸° ìƒíƒœ ì„¤ì •]
    B --> C[LoopAgent ì‹œì‘]
    C --> D[SequentialAgent ì‹¤í–‰]
    D --> E[TherapistAgent]
    E --> F[ClientAgent]
    F --> G[SupervisorAgent]
    G --> H[ConversationManager]
    H --> I{ì¢…ë£Œ ì¡°ê±´?}
    I -->|ì•„ë‹ˆì˜¤| D
    I -->|ì˜ˆ| J[SessionRecorder]
    J --> K[ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ì €ì¥]
    K --> L[ì„¸ì…˜ ì™„ë£Œ]
```

## ğŸ› ï¸ ê°œë°œì ê°€ì´ë“œ

### í”„ë¡œì íŠ¸ êµ¬ì¡°

```
motivation/
â”œâ”€â”€ generator_critic/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ agent.py           # ë©”ì¸ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ
â”œâ”€â”€ output/                # ìƒì„±ëœ ì„¸ì…˜ ê¸°ë¡
â”œâ”€â”€ hello.py              # í…ŒìŠ¤íŠ¸ ë° ì˜ˆì‹œ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ pyproject.toml        # í”„ë¡œì íŠ¸ ì„¤ì •
â””â”€â”€ README.md            # ì´ ë¬¸ì„œ
```

### ì£¼ìš” í´ë˜ìŠ¤

- `TherapistAgent`: MI ì „ë¬¸ê°€ ì—ì´ì „íŠ¸
- `ClientAgent`: ë‚´ë‹´ì ì‹œë®¬ë ˆì´ì…˜ ì—ì´ì „íŠ¸  
- `SupervisorAgent`: ìŠˆí¼ë°”ì´ì € ì—ì´ì „íŠ¸
- `ConversationManager`: ëŒ€í™” íë¦„ ê´€ë¦¬
- `SessionRecorder`: ì„¸ì…˜ ê¸°ë¡ ì €ì¥
- `MotivationalInterviewingSystem`: ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ğŸ™ ê°ì‚¬ì˜ ë§

- Google Agent Development Kit íŒ€
- Motivational Interviewing ì—°êµ¬ ì»¤ë®¤ë‹ˆí‹°
- ëª¨ë“  ê¸°ì—¬ìë“¤

---

ğŸ’¡ **ì°¸ê³ **: ì´ ì‹œìŠ¤í…œì€ êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ ì„ìƒ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸° ì „ì— ì „ë¬¸ê°€ì˜ ê²€í† ë¥¼ ë°›ìœ¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
